SexLab Yet Another Combat Rape for NPC
====================================================================

SexLab Yet Another Combat Rape(SexLab YACR)のNPC版。
元々のYACRがプレイヤーとフォロワーのみの発生だったため、その他NPC用の
ものを別に作成しました。


## 概要

* SexLab YACRの機能の簡易版をPCとフォロワー以外の女性NPCに適用します。
* セックスしているアクターに攻撃可能です。攻撃中断判定が難しいため、オ
  リジナルYACRと違い、レイプされている側にも攻撃が通ります。
  (助けるためにエクスプロージョンを撃つと両方とも敵対します)

* ↑の横槍が入ると、セックスが中断します。
  「だいたいの場合は横槍が入る」ことを想定して機能は実装しています。

* PCがいるセルの女性NPCを捕捉し、戦闘状態に入ったらYACRの機能を有効に
  します。PCがセルを離れると行為を停止させ、機能を外します。
* 捕捉されているNPC/機能が有効になっているNPCはMCMから見ることができ
  ます。
* 行為発生感知用の専用マーカークエストを持っています(デフォルトオフ)

* オリジナルのYACRから、「ブリードアウト状態になった時にレイプを引き寄
  せる機能」「はやしたて」「アーマーブレイク」などを削除しています。
* 男フォロワーやペットが敵女NPCを襲います(MCMで設定可)。エンドレスレイ
  プにはならず、1回で終了します。襲われた敵は1日間鎮静状態になります。


## 注意事項

* 発生確率を100%にしても、必ず発生するわけではありません。
  (負荷を抑えるため、オリジナルYACRより更に適当に割引いて処理しています)

* デフォルト発生率は効果発生の確認のため、高めになっています。機能が問題
  なく動作しているようでしたら、設定値を下げてください。

* 遠方で本Mod由来のCTDが発生した場合、特にSex前の状態では原因が非常に掴み
  にくいです。導入後、特に野外でランダムCTDが発生するようになったら、使用
  を諦めてください。

* マーカークエストは諸般の事情により大学クエストと同じ名前「見えぬものを
  暴く」になっています。

* たまにマーカーが残ったままになりますが、放っておくと消えます。

* モーション中に死亡した死体硬直防止処理のため、床をすり抜けて消える死体
  が発生する可能性があります。ある程度は防止しますが、達人魔法とかでは発
  生するかもしれません。あまりあることではないので、仕様で。

* 人間2Pと3PはSexLab MCMから設定できるレイプアニメーションでなければなり
  ません。合致するアニメーションがない場合、行為は中断されます。この場合
  でも終了処理は正常に走ります。

* 逆に人間4Pと5Pはレイプではなく合意アニメーションとして設定されていなけ
  ればなりません。4P5Pはアニメーション数が少なく、他のModともアニメを共有
  するためにこうしています。

* エンドレスレイプをONにすると、攻撃を受けるまで止まりません。助けたい場
  合はレイパーを攻撃してください。攻撃したくない場合はエリアから離れて下
  さい。

* YACRと違って「MCMに出ないニッチな設定」はありません。固定となります。


## 既知の問題

* レイプ開始時など一時的にNPCを無敵化しているため、エフェクトを加えるModが
  あった場合、動作しません。そういうModがあったらお知らせください。

* たまに横槍を入れても止まらずに無敵化するレイパーがいます。アニメーション
  が1段階進むと無敵化が解けますので、再度横槍を入れてください。


## 必須

* Skyrim LE or SE
* Skyrim SexLab 1.62 or 1.63
* SexLab Aroused Redux


## 製作環境で関係ありそうなModや設定

* SexLab基本設定"Disable Starting Teleport"をOFFに
* Nether's Follower Framework 2.7.6
* SexLabのシーン自体をフックするAdd On(SLSOとか)なし


## 競合について

* 大体YACRと同じなので、YACRのReadmeを参照してください。


## アップグレード

特に注記がない限り、更新は上書きするだけです。勝手に再起動するため、戦闘中で
はない、できれば戦闘から時間が経った後で更新してください。


## アンインストール

ロード画面を挟むセル移動後、実時間で5秒程度待ち、MCMからMod有効とマーカークエ
スト有効のチェックマークを外し、MCMから抜けて5秒程度待ち、セーブしてからアンイ
ンストールしてください。
SaveTool.exeなどをその後にかけるとより安全です。


## 謝辞

* Bethesda
* Skyrim SexLab & LoversLab
* SexLab Defeat
* SexLab RapeSpell
* Skyrim Battle Test Area
* SL Peeping Tom
* bbspink Skyrim エロMod晒しスレ
* R18なModなので具体名は挙げませんが国内Modderの皆さま


## 更新履歴

### 2021/06/29 - 1.1 beta

* 設定ファイルのセーブ・ロード機能を追加
* 発動時に出るピンクのパーティクルエフェクトを削除
* ラグドール処理がおかしな状態になる対策コードの書き換え
* Dripping when Aroused サポートを削除
 (MCM以外にコードが全くありませんでした！どこでそうなったか不明)

* その他、SE用のこまごま処理、コード整理、小さなバグ修正
* 4P5Pのアニメ設定(レイプだとダメ)について自分でも覚えてなかったのでReadmeに追記


### 2019/01/24 - 1.0

* 戦闘終了時一斉に走っていたResetAIを時間差で走らせるように修正


### 2018/12/01 - 1.0alpha5

* 影響の少なさそうな「横槍=>行為解除時」の無敵化を削除(from YACR)


### 2018/11/26 - 1.0alpha4

* キルムーブ時に発生しないように判定を強化

* 起こってすぐに横やりが入って中断になるイベントはマーカーが出ないよ
  うにマーカー発生にディレイをかけるように修正
* 該当NPC探索クエストのリロードを戦闘時にしないように修正
* 絶頂時にちゃんと絶頂イベントを送るように修正
* ドラゴンが身体が大きすぎて、わけわからん遠距離近接攻撃の除外対象に
  なっていたのを修正

### 2018/10/24 - 1.0alpha3

* 一度戦闘状態に入ったらセルロードを挟むまで離さなかったエイリアスを
  距離＆SSLの稼働状態＆戦闘状態を判別して上書きするように修正……が、
  正常に機能していなかったのを修正


### 2018/10/12 - 1.0alpha2

* 一度戦闘状態に入ったらセルロードを挟むまで離さなかったエイリアスを
  距離＆SSLの稼働状態＆戦闘状態を判別して上書きするように修正

* フォロワーがレイプした敵NPCが、横槍が入った状態でも鎮静になっていた
  不具合を修正

* 多重Sex防止のため、犯されている側が攻撃をくらって中断した際に数秒の
  インターバルを挟むように修正

* SetGhost解除を強化

* 戦闘停止判定にブラック・ブラッド略奪団を追加


### 2018/10/04 - 1.0alpha1

* 初回リリース

